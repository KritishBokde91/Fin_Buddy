{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/webstie%20porjects/JIT%20Hackathon/client/src/app/spending/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ArrowBigRightDash } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\nfunction Page() {\r\n  const [img, setImg] = useState(null);\r\n  const [spendings, setSpendings] = useState([]);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n \r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const storedImg = localStorage.getItem(\"photo\");\r\n    setImg(storedImg);\r\n\r\n    const user = localStorage.getItem(\"user\");\r\n    if (!user) {\r\n      router.push(\"/\");\r\n    }\r\n  }, [router]);\r\n\r\n  const [formData, setFormData] = useState({\r\n    category: '',\r\n    amount: '',\r\n    description: ''\r\n  });\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prevState => ({\r\n      ...prevState,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await fetch(\"http://10.50.0.89:8888/api/spendings/\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            user_uid: \"PkrrbhFWbGPISmVAGivoCYpsuGb2\",\r\n          }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n\r\n        const result = await response.json();\r\n        setSpendings(result.data || []);\r\n      } catch (err) {\r\n        console.error(\"Error fetching data:\", err);\r\n        setError(err.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setSuccess(false);\r\n\r\n    try {\r\n      const response = await fetch('https://your-api-endpoint.com/submit', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          // Add any additional headers like authorization if needed\r\n          // 'Authorization': 'Bearer your-token-here'\r\n        },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      console.log('Success:', result);\r\n      setSuccess(true);\r\n      // Optionally reset the form after successful submission\r\n      setFormData({\r\n        category: '',\r\n        amount: '',\r\n        description: ''\r\n      });\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setError(error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Group spendings by month and category\r\n  const monthlySpendings = spendings.reduce((acc, spending) => {\r\n    const date = new Date(spending.date);\r\n    const monthYear = `${date.toLocaleString('default', { month: 'long' })} ${date.getFullYear()}`;\r\n    \r\n    if (!acc[monthYear]) {\r\n      acc[monthYear] = {\r\n        total: 0,\r\n        categories: {}\r\n      };\r\n    }\r\n    \r\n    if (!acc[monthYear].categories[spending.category]) {\r\n      acc[monthYear].categories[spending.category] = 0;\r\n    }\r\n    \r\n    acc[monthYear].categories[spending.category] += spending.amount;\r\n    acc[monthYear].total += spending.amount;\r\n    \r\n    return acc;\r\n  }, {});\r\n\r\n  if (loading) return <div className=\"p-10\">Loading...</div>;\r\n  if (error) return <div className=\"p-10 text-red-500\">Error: {error}</div>;\r\n\r\n  return (\r\n    <div className=\"h-screen w-full text-blue-600\">\r\n      <nav className=\"fixed top-0 h-20 w-full flex items-center justify-between px-10 gap-10 bg-white\">\r\n        <div>\r\n          <h1 className=\"text-3xl\">FinBubby</h1>\r\n        </div>\r\n        <div className=\"flex gap-10 items-center justify-center\">\r\n          <Link href=\"/dashboard\">\r\n            <h1 className=\"cursor-pointer\">Home</h1>\r\n          </Link>\r\n          <Link href=\"/spending\">\r\n            <h1>Spendings</h1>\r\n          </Link>\r\n          <Link href=\"/forecast\">\r\n            <h1>Forecast</h1>\r\n          </Link>\r\n          <Link href=\"/prediction\">\r\n            <h1>Predition </h1>\r\n          </Link>\r\n          <div className=\"h-10 w-10 rounded-3xl overflow-hidden\">\r\n            <img src={img || \"\"} alt=\"User\" />\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      <div className=\"h-full w-full py-20 px-10 overflow-auto\">\r\n        <h1 className=\"text-5xl text-blue-600 flex items-center gap-1 mb-6\">\r\n          Monthly Spending Breakdown\r\n          <ArrowBigRightDash size={70} />\r\n        </h1>\r\n\r\n        {Object.entries(monthlySpendings).map(([monthYear, data]) => (\r\n          <div key={monthYear} className=\"mb-8\">\r\n            <div className=\"flex justify-between items-center mb-4\">\r\n              <h2 className=\"text-4xl font-bold\">{monthYear}</h2>\r\n              <div className=\"text-2xl\">\r\n                Total: <span className=\"font-bold\">₹{data.total.toFixed(2)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Category\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Amount\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Percentage\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {Object.entries(data.categories).map(([category, amount]) => (\r\n                    <tr key={category}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                        {category}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        ₹{amount.toFixed(2)}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        {((amount / data.total) * 100).toFixed(1)}%\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        ))}\r\n\r\n        {Object.keys(monthlySpendings).length === 0 && (\r\n          <div className=\"text-center py-10\">No spending records found</div>\r\n        )}\r\n\r\n        <div className=\"h-72 w-80 p-10 bg-white border-2 fixed bottom-4 rounded-4xl right-10 \">\r\n          \r\n          <h1>Add Spendings</h1>\r\n          \r\n          <input \r\n        type=\"text\" \r\n        name=\"category\"\r\n        className=\"border-2 mt-2 p-1 rounded-1xl\" \r\n        placeholder=\"Category\" \r\n        value={formData.category}\r\n        onChange={handleInputChange}\r\n      />\r\n      <input \r\n        type=\"text\" \r\n        name=\"amount\"\r\n        className=\"border-2 mt-2 p-1 rounded-1xl\" \r\n        placeholder=\"Amount\" \r\n        value={formData.amount}\r\n        onChange={handleInputChange}\r\n      />\r\n      <input \r\n        type=\"text\" \r\n        name=\"description\"\r\n        className=\"border-2 mt-2 p-1 rounded-1xl\" \r\n        placeholder=\"Description\" \r\n        value={formData.description}\r\n        onChange={handleInputChange}\r\n      />\r\n         \r\n         <button className=\"mt-2 bg-blue-400 text-white p-2 rounded-3xl\">Submit</button>\r\n\r\n\r\n\r\n        </div>\r\n\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Page;"],"names":[],"mappings":"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","debugId":null}}]
}